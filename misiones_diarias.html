<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TheOneFit Club</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600&display=swap" rel="stylesheet">
<link rel="stylesheet" href="style generico.css">
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <link rel="stylesheet" href="stilosMisiones.css">
</head>
<body>
    <header>
        <img src="logo3.png" alt="Logo de la empresa" class="logo">
        <nav>
            <a href="index.html">Inicio</a>
            <a href="tablas.html">Tablas</a>
            <a href="shop.html">Shop</a>
            <a href="app.html">app</a>
            <a href="misiones_diarias.html" id="misionesLink" style="display: none;">Misiones</a>
        </nav>
        <div class="user-menu" id="userMenu" style="display: none;">
            <button class="user-menu-button" onclick="toggleDropdown()" id="userButton">Usuario</button>
            <div class="dropdown-content" id="dropdownContent">
                <a href="perfil.html">Perfil</a>
                <a href="creador de rutinas.html">seguimiento</a>
                <a href="#" onclick="logout()">Cerrar Sesi√≥n</a>
            </div>
        </div>
        <button class="login-button" onclick="openModal()" id="loginButton">Iniciar Sesi√≥n</button>
    </header>

    <div id="timer">
        Tiempo restante: <span id="time">24:00:00</span>
    </div>

   

    <div class="container">
        <div id="xp-bar">
            <div id="xp-progress"></div>
            <span id="level">Nivel 1</span>
        </div>
        <div class="question-container" id="question-container">
            <h1>¬øCu√°l es tu nivel de entrenamiento?</h1>
            <button onclick="selectLevel('bajo')">Nivel Bajo</button>
            <button onclick="selectLevel('medio')">Nivel Medio</button>
            <button onclick="selectLevel('alto')">Nivel Alto</button>
            <button class="toggle-button" onclick="toggleWeeklyMissions()">Ver Misiones Semanales</button>
        </div>

        <div id="counter">
            Misiones completadas: <span id="completed-count">0</span>/<span id="total-missions">0</span>
        </div>
        
        <div class="mission-container" id="mission-container">
            <h1>Misiones Diarias de Gym</h1>
            <div id="missions-list"></div>
            <button class="reset-button" onclick="resetMissions()">Reiniciar Misiones</button>
        </div>

        <div class="weekly-mission-container" id="weekly-mission-container">
            <h1>Misiones Semanales de Gym</h1>
            <div id="weekly-missions-list"></div>
            <div class="weekly-timer" id="weekly-timer">
                Tiempo restante para el cambio de d√≠a: <span id="weekly-time">00:00:00</span>
            </div>
            <button class="toggle-button" onclick="toggleDailyMissions()">Reiniciar</button>
        </div>

        <div id="achievements" class="mission-container">
            <h2>Logros Desbloqueados üèÜ</h2>
            <div id="achievements-list"></div>
        </div>

        <div class="social-share">
            <button onclick="shareProgress()">Compartir Progreso üèãÔ∏è‚ôÇÔ∏è</button>
        </div>
    </div>

    <footer>
        <div class="social-icons">
            <a href="https://www.instagram.com/tu_usuario_de_instagram" target="_blank">
                <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" fill="white">
                    <path d="M12 2.163c3.204 0 3.584.012 4.85.07 3.252.148 4.771 1.691 4.919 4.919.058 1.265.069 1.645.069 4.849 0 3.205-.012 3.584-.069 4.849-.149 3.225-1.664 4.771-4.919 4.919-1.266.058-1.644.07-4.85.07-3.204 0-3.584-.012-4.849-.07-3.26-.149-4.771-1.699-4.919-4.92-.058-1.265-.07-1.644-.07-4.849 0-3.204.013-3.583.07-4.849.149-3.227 1.664-4.771 4.919-4.919 1.266-.057 1.645-.069 4.849-.069zm0-2.163c-3.259 0-3.667.014-4.947.072-4.358.2-6.78 2.618-6.98 6.98-.059 1.281-.073 1.689-.073 4.948 0 3.259.014 3.668.072 4.948.2 4.358 2.618 6.78 6.98 6.98 1.281.058 1.689.072 4.948.072 3.259 0 3.668-.014 4.948-.072 4.354-.2 6.782-2.618 6.979-6.98.059-1.28.073-1.689.073-4.948 0-3.259-.014-3.667-.072-4.947-.196-4.354-2.617-6.78-6.979-6.98-1.281-.059-1.69-.073-4.949-.073zm0 5.838c-3.403 0-6.162 2.759-6.162 6.162s2.759 6.163 6.162 6.163 6.162-2.759 6.162-6.163c0-3.403-2.759-6.162-6.162-6.162zm0 10.162c-2.209 0-4-1.79-4-4 0-2.209 1.791-4 4-4s4 1.791 4 4c0 2.21-1.791 4-4 4zm6.406-11.845c-.796 0-1.441.645-1.441 1.44s.645 1.44 1.441 1.44c.795 0 1.439-.645 1.439-1.44s-.644-1.44-1.439-1.44z"/>
                </svg>
            </a>
    
            <a href="https://wa.me/tu_numero_de_whatsapp" target="_blank">
                <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" fill="white">
                    <path d="M12 2c5.514 0 10 4.486 10 10s-4.486 10-10 10-10-4.486-10-10 4.486-10 10-10zm0-2c-6.627 0-12 5.373-12 12s5.373 12 12 12 12-5.373 12-12-5.373-12-12-12zm5.507 13.941c-1.512 1.195-3.174 1.931-5.506 1.931-1.758 0-3.294-.457-4.597-1.342l-3.404.879 1.053-3.073c-1.042-1.658-1.588-3.534-1.588-5.494 0-5.514 4.486-10 10-10s10 4.486 10 10c0 3.043-1.364 5.814-3.493 7.695zm-5.507-7.941c-1.657 0-3 1.343-3 3s1.343 3 3 3 3-1.343 3-3-1.343-3-3-3zm0 2c.552 0 1 .448 1 1s-.448 1-1 1-1-.448-1-1 .448-1 1-1z"/>
                </svg>
            </a>
    
            <a href="https://github.com/tu_usuario_de_github" target="_blank">
                <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" fill="white">
                    <path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"/>
                </svg>
            </a>
    
            <a href="https://discord.gg/tu_servidor_discord" target="_blank">
                <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" fill="white">
                    <path d="M19.27 5.33C17.94 4.71 16.5 4.26 15 4a.09.09 0 0 0-.07.03c-.18.33-.39.76-.53 1.09a16.09 16.09 0 0 0-4.8 0c-.14-.34-.35-.76-.54-1.09c-.01-.02-.04-.03-.07-.03c-1.5.26-2.93.71-4.27 1.33c-.01 0-.02.01-.03.02c-2.72 4.07-3.47 8.03-3.1 11.95c0 .02.01.04.03.05c1.8 1.32 3.53 2.12 5.24 2.65c.03.01.06 0 .07-.02c.4-.55.76-1.13 1.07-1.74c.02-.04 0-.08-.04-.09c-.57-.22-1.11-.48-1.64-.78c-.04-.02-.04-.08-.01-.11c.11-.08.22-.17.33-.25c.02-.02.05-.02.07-.01c3.44 1.57 7.15 1.57 10.55 0c.02-.01.05-.01.07.01c.11.09.22.17.33.26c.04.03.04.09-.01.11c-.52.31-1.07.56-1.64.78c-.04.01-.05.06-.04.09c.32.61.68 1.19 1.07 1.74c.03.01.06.02.09.01c1.72-.53 3.45-1.33 5.25-2.65c.02-.01.03-.03.03-.05c.44-4.53-.73-8.46-3.1-11.95c-.01-.01-.02-.02-.04-.02zM8.52 14.91c-1.03 0-1.89-.95-1.89-2.12s.84-2.12 1.89-2.12c1.06 0 1.9.96 1.89 2.12c0 1.17-.84 2.12-1.89 2.12zm6.97 0c-1.03 0-1.89-.95-1.89-2.12s.84-2.12 1.89-2.12c1.06 0 1.9.96 1.89 2.12c0 1.17-.83 2.12-1.89 2.12z"/>
                </svg>
            </a>
    
            <a href="https://open.spotify.com/playlist/0GaNYLCRmpGV3241fTQAZD?si=Z-TFHyFJTN623Rb1UuYXzQ" target="_blank">
                <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" fill="white">
                    <path d="M12 0c-6.627 0-12 5.373-12 12s5.373 12 12 12 12-5.373 12-12-5.373-12-12-12zm5.09 17.421c-.209 0-.42-.064-.6-.198-1.644-1.16-3.718-1.785-6.043-1.785-1.007 0-2.052.131-3.107.391-.43.107-.884-.163-.992-.597-.109-.434.163-.883.597-.992 1.163-.285 2.312-.428 3.447-.428 2.535 0 4.881.674 6.779 2.002.373.263.455.771.193 1.145-.158.224-.412.342-.674.342zm.85-2.865c-.252 0-.5-.095-.691-.266-1.977-1.782-4.673-2.765-7.653-2.765-1.167 0-2.353.158-3.519.471-.467.127-.949-.147-1.076-.617-.127-.468.147-.949.617-1.076 1.289-.348 2.632-.521 3.978-.521 3.369 0 6.524 1.232 8.889 3.469.369.332.396.9.064 1.27-.176.195-.418.295-.659.295zm.804-2.887c-.233 0-.465-.081-.653-.247-2.378-2.135-5.437-3.312-8.592-3.312-1.389 0-2.795.188-4.165.561-.482.13-.976-.153-1.106-.638-.13-.482.154-.975.638-1.106 1.494-.401 3.031-.603 4.633-.603 3.55 0 6.947 1.364 9.558 3.843.384.345.412.935.066 1.319-.185.206-.44.311-.687.311z"/>
                </svg>
            </a>
        </div>
        <p>¬© 2025 TheOneFit Club. Todos los derechos reservados.</p>
    </footer>

    <!-- Modal de Inicio de Sesi√≥n y Registro -->
    <div id="loginModal" class="modal">
        <div class="modal-content">
            <!-- Formulario de Inicio de Sesi√≥n -->
            <div id="loginForm">
                <h2>Iniciar Sesi√≥n</h2>
                <input type="text" placeholder="Usuario" id="username">
                <input type="password" placeholder="Contrase√±a" id="password">
                <button onclick="login()">Ingresar</button>
                <button onclick="showRegisterForm()">Registrarse</button>
                <button class="close-button" onclick="closeModal()">Cerrar</button>
            </div>

            <!-- Formulario de Registro -->
            <div id="registroForm">
                <h2>Reg√≠strate</h2>
                <input type="text" placeholder="Nombre completo" id="nombre">
                <input type="email" placeholder="Correo electr√≥nico" id="email">
                <input type="password" placeholder="Contrase√±a" id="regPassword">
                <input type="password" placeholder="Confirmar contrase√±a" id="confirmPassword">
                <button onclick="register()">Registrarse</button>
                <button onclick="showLoginForm()">Iniciar Sesi√≥n</button>
                <button class="close-button" onclick="closeModal()">Cerrar</button>
            </div>
        </div>
    </div>

    <script>
       // ============================
// VARIABLES GLOBALES
// ============================
let completedMissions = 0;
let totalMissions = 0;
let streak = parseInt(localStorage.getItem('streak')) || 0;
let timerInterval;
let weeklyTimerInterval;
let xp = parseInt(localStorage.getItem('xp')) || 0;
let level = parseInt(localStorage.getItem('level')) || 1;
const XP_PER_LEVEL = 100;

const soundComplete = new Audio('success-sound.mp3');
const soundLevelUp = new Audio('level-up-sound.mp3');

const achievements = {
    beginner: { name: "Novato", desc: "Completa tu primera misi√≥n", unlocked: false },
    consistent: { name: "Consistente", desc: "Completa 3 d√≠as consecutivos", unlocked: false },
    weekMaster: { name: "Maestro Semanal", desc: "Completa todas las misiones semanales", unlocked: false },
    gymRat: { name: "Rata de Gimnasio", desc: "Alcanza nivel 10", unlocked: false }
};

// ============================
// MISI√ìN POR NIVEL
// ============================
const missionsByLevel = {
    bajo: [
        "cardio en cinta 20min",
        "Sentadillas con mancuerna (3x8)",
        "flexiones (3 series al fallo)",
        "Flexi√≥n de piernas en m√°quina (2x10)",
        "Elevaci√≥n de talones en el suelo (2x10)"
    ],
    medio: [
        "Calentamiento (10 min)",
        "Press de banca (4x10)",
        "Sentadillas (4x12)",
        "Dominadas (3x8)",
        "Plancha (3x1 min)"
    ],
    alto: [
        "Calentamiento (10 min)",
        "Peso muerto (4x8)",
        "Burpees (3x10)",
        "Fondos en paralelas (4x10)",
        "Mountain climbers (3x30 seg)"
    ]
};

// ============================
// PLAN SEMANAL
// ============================
const weeklyPlan = {
    lunes: ["Press de banca", "Fondos en paralelas", "Aperturas con mancuernas"],
    martes: ["Sentadillas", "Peso muerto rumano", "Zancadas con peso"],
    mi√©rcoles: ["Dominadas", "Remo con barra", "Jal√≥n al pecho"],
    jueves: ["Press inclinado", "Press militar", "Elevaciones laterales"],
    viernes: ["Sentadillas frontales", "Prensa de piernas", "Hip thrust"]
};

// ============================
// LOGIN / USUARIO
// ============================
function checkLogin() {
    const loginTime = localStorage.getItem('loginTime');
    const username = localStorage.getItem('username');
    const now = Date.now();

    if (loginTime && username && now - loginTime < 24 * 60 * 60 * 1000) {
        document.getElementById('misionesLink').style.display = 'inline';
        document.getElementById('loginButton').style.display = 'none';
        document.getElementById('userMenu').style.display = 'inline';
        document.getElementById('userButton').textContent = username;
    } else {
        localStorage.removeItem('loginTime');
        localStorage.removeItem('username');
    }
}

function login() {
    const username = document.getElementById('username').value.trim();
    const password = document.getElementById('password').value.trim();

    if (!username || !password) {
        Swal.fire('Error', 'Por favor completa todos los campos.', 'error');
        return;
    }

    localStorage.setItem('username', username);
    localStorage.setItem('loginTime', Date.now());

    Swal.fire('√âxito', `Bienvenido ${username}!`, 'success');
    closeModal();
    checkLogin();
}

function logout() {
    localStorage.removeItem('username');
    localStorage.removeItem('loginTime');
    document.getElementById('misionesLink').style.display = 'none';
    document.getElementById('loginButton').style.display = 'inline';
    document.getElementById('userMenu').style.display = 'none';
    Swal.fire('Sesi√≥n cerrada', 'Has cerrado sesi√≥n correctamente.', 'success');
}

function openModal() { document.getElementById('loginModal').style.display = 'flex'; showLoginForm(); }
function closeModal() { document.getElementById('loginModal').style.display = 'none'; }
function showLoginForm() { document.getElementById('loginForm').style.display = 'block'; document.getElementById('registroForm').style.display = 'none'; }
function showRegisterForm() { document.getElementById('loginForm').style.display = 'none'; document.getElementById('registroForm').style.display = 'block'; }

function register() {
    const nombre = document.getElementById('nombre').value.trim();
    const email = document.getElementById('email').value.trim();
    const password = document.getElementById('regPassword').value.trim();
    const confirmPassword = document.getElementById('confirmPassword').value.trim();

    if(password !== confirmPassword) {
        Swal.fire('Error', 'Las contrase√±as no coinciden', 'error');
        return;
    }

    Swal.fire('Registro exitoso', `Bienvenido ${nombre}!`, 'success');
    document.getElementById('registroForm').reset();
    showLoginForm();
}

function toggleDropdown() { document.getElementById('dropdownContent').classList.toggle('show'); }
window.onclick = function(event) {
    if (!event.target.matches('.user-menu-button')) {
        const dropdowns = document.getElementsByClassName('dropdown-content');
        for (let dd of dropdowns) dd.classList.remove('show');
    }
};

// ============================
// SISTEMA DE MISIONES
// ============================
function selectLevel(level) {
    document.getElementById("question-container").style.display = "none";
    document.getElementById("mission-container").style.display = "block";
    document.getElementById("weekly-mission-container").style.display = "none";
    document.getElementById("timer").style.display = "block";
    document.getElementById("counter").style.display = "block";

    renderMissions(level);
}

function renderMissions(level) {
    const missionsList = document.getElementById("missions-list");
    missionsList.innerHTML = "";
    const missions = missionsByLevel[level];
    const selectedMissions = getRandomMissions(missions, 5);

    totalMissions = selectedMissions.length;
    completedMissions = 0;
    updateCounter();

    selectedMissions.forEach((mission, i) => {
        const missionDiv = document.createElement('div');
        missionDiv.classList.add('mission');
        missionDiv.id = `mission${i+1}`;
        missionDiv.innerHTML = `<span>${i+1}. ${mission}</span><button onclick="completeMission('mission${i+1}')">Completar</button>`;
        missionsList.appendChild(missionDiv);
    });
}

function getRandomMissions(arr, count) { return [...arr].sort(() => 0.5 - Math.random()).slice(0, count); }

function completeMission(id) {
    const mission = document.getElementById(id);
    if (!mission.classList.contains('completed')) {
        mission.classList.add('completed');
        mission.querySelector('button').disabled = true;
        completedMissions++;
        updateCounter();
        soundComplete.play();
        addXP(20);
        saveMissionProgress(id);
        checkStreak();

        if(completedMissions === 1 && !achievements.beginner.unlocked) unlockAchievement('beginner');

        Swal.fire('¬°Misi√≥n completada!', `Progreso: ${completedMissions}/${totalMissions}`, 'success');
    }
}

function updateCounter() {
    document.getElementById('completed-count').textContent = completedMissions;
    document.getElementById('total-missions').textContent = totalMissions;
}

function saveMissionProgress(id) {
    const completed = JSON.parse(localStorage.getItem('completedMissions')) || [];
    if(!completed.includes(id)) completed.push(id);
    localStorage.setItem('completedMissions', JSON.stringify(completed));
}

function loadProgress() {
    const savedMissions = JSON.parse(localStorage.getItem('completedMissions')) || [];
    savedMissions.forEach(id => {
        const mission = document.getElementById(id);
        if(mission) { mission.classList.add('completed'); mission.querySelector('button').disabled = true; }
    });

    const savedAchievements = JSON.parse(localStorage.getItem('achievements')) || {};
    Object.keys(achievements).forEach(key => { achievements[key].unlocked = savedAchievements[key] || false; });

    updateXpBar();
    renderAchievements();
    checkStreak();
}

function resetMissions() {
    document.getElementById("question-container").style.display = "block";
    document.getElementById("mission-container").style.display = "none";
    document.getElementById("weekly-mission-container").style.display = "none";
    document.getElementById("timer").style.display = "none";
    document.getElementById("counter").style.display = "none";
    clearInterval(timerInterval);
    resetCounter();
    startTimer();
}

// ============================
// XP Y LOGROS
// ============================
function addXP(amount) {
    xp += amount;
    const neededXP = level * XP_PER_LEVEL;
    if(xp >= neededXP) {
        level++;
        xp -= neededXP;
        soundLevelUp.play();
        Swal.fire('¬°Nivel '+level+'!', '¬°Has subido de nivel!', 'success');
        localStorage.setItem('level', level);
        checkAchievements();
    }
    localStorage.setItem('xp', xp);
    updateXpBar();
}

function updateXpBar() {
    const progress = (xp / (level * XP_PER_LEVEL)) * 100;
    document.getElementById('xp-progress').style.width = progress + '%';
    document.getElementById('level').textContent = 'Nivel ' + level;
}

function checkAchievements() {
    if(level >= 10 && !achievements.gymRat.unlocked) unlockAchievement('gymRat');
}

function unlockAchievement(key) {
    achievements[key].unlocked = true;
    localStorage.setItem('achievements', JSON.stringify(achievements));
    renderAchievements();
    Swal.fire('Logro Desbloqueado: '+achievements[key].name, achievements[key].desc, 'success');
}

function renderAchievements() {
    const list = document.getElementById('achievements-list');
    list.innerHTML = Object.keys(achievements)
        .filter(k => achievements[k].unlocked)
        .map(k => `<div class="mission"><strong>${achievements[k].name}</strong>: ${achievements[k].desc}</div>`)
        .join('');
}

function checkStreak() {
    const last = localStorage.getItem('lastCompletedDate');
    const today = new Date().toDateString();

    if(last === today) return;

    const yesterday = new Date();
    yesterday.setDate(yesterday.getDate() -1);

    if(last === yesterday.toDateString()) streak++;
    else streak = 0;

    if(streak >= 3) unlockAchievement('consistent');

    localStorage.setItem('streak', streak);
    localStorage.setItem('lastCompletedDate', today);
}

// ============================
// TIMER DIARIO
// ============================
function startTimer() {
    const storedTime = localStorage.getItem('timerEnd');
    let endTime = storedTime ? parseInt(storedTime) : Date.now() + 24*60*60*1000;
    if(!storedTime) localStorage.setItem('timerEnd', endTime);

    timerInterval = setInterval(() => {
        const remaining = endTime - Date.now();
        const timerDisplay = document.getElementById('time');
        if(remaining <= 0) { resetMissions(); endTime = Date.now()+24*60*60*1000; localStorage.setItem('timerEnd', endTime); }
        else {
            const h = Math.floor(remaining/3600000);
            const m = Math.floor((remaining%3600000)/60000);
            const s = Math.floor((remaining%60000)/1000);
            timerDisplay.textContent = `${String(h).padStart(2,'0')}:${String(m).padStart(2,'0')}:${String(s).padStart(2,'0')}`;
        }
    },1000);
}

// ============================
// TIMER SEMANAL
// ============================
function startWeeklyTimer() {
    const weeklyDisplay = document.getElementById('weekly-time');
    function update() {
        const now = new Date();
        const midnight = new Date(now);
        midnight.setHours(24,0,0,0);
        const diff = midnight - now;
        if(diff <=0){ clearInterval(weeklyTimerInterval); renderWeeklyMissions(); startWeeklyTimer(); }
        else {
            const h = Math.floor((diff % (1000*60*60*24))/(1000*60*60));
            const m = Math.floor((diff % (1000*60*60))/(1000*60));
            const s = Math.floor((diff % (1000*60))/1000);
            weeklyDisplay.textContent = `${String(h).padStart(2,'0')}:${String(m).padStart(2,'0')}:${String(s).padStart(2,'0')}`;
        }
    }
    weeklyTimerInterval = setInterval(update,1000);
    update();
}

// ============================
// MISIONES SEMANALES
// ============================
function renderWeeklyMissions() {
    const weeklyList = document.getElementById('weekly-missions-list');
    weeklyList.innerHTML = "";
    const days = ["domingo","lunes","martes","mi√©rcoles","jueves","viernes","s√°bado"];
    const today = days[new Date().getDay()];
    const missions = weeklyPlan[today] || [];
    totalMissions = missions.length;
    completedMissions = 0;
    updateCounter();
    missions.forEach((mission,i) => {
        const div = document.createElement('div');
        div.classList.add('mission');
        div.id = `weekly-mission${i+1}`;
        div.innerHTML = `<span>${i+1}. ${mission}</span><button onclick="completeMission('weekly-mission${i+1}')">Completar</button>`;
        weeklyList.appendChild(div);
    });
    document.getElementById('weekly-timer').style.display = 'block';
}

// ============================
// FUNCIONES AUXILIARES
// ============================
function toggleWeeklyMissions() { document.getElementById("question-container").style.display="none"; document.getElementById("mission-container").style.display="none"; document.getElementById("weekly-mission-container").style.display="block"; renderWeeklyMissions(); startWeeklyTimer(); }
function toggleDailyMissions() { document.getElementById("weekly-mission-container").style.display="none"; document.getElementById("question-container").style.display="block"; document.getElementById("weekly-timer").style.display="none"; document.getElementById("counter").style.display="none"; document.getElementById("timer").style.display="none"; clearInterval(weeklyTimerInterval); resetCounter(); }

function resetCounter() { completedMissions=0; totalMissions=0; updateCounter(); document.getElementById('counter').style.display='none'; }
function shareProgress() { const txt=`¬°Estoy en nivel ${level}! üèãÔ∏è‚ôÇÔ∏è ${completedMissions}/${totalMissions} misiones completadas.`; window.open(`https://twitter.com/intent/tweet?text=${encodeURIComponent(txt)}`,'_blank'); }

// ============================
// INICIALIZACI√ìN
// ============================
window.onload = function() {
    checkLogin();
    loadProgress();
    startTimer();
    startWeeklyTimer();
};

    </script>
</body>
</html>